<?xml version="1.0" encoding="UTF-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
    <Fragment>
        <UI Id="CustomUI">
            <Property Id="INSTALLDESKTOPSHORTCUT" Value="0" />

            <!-- Use built-in dialog set -->
            <UIRef Id="WixUI_FeatureTree" />
            <UIRef Id="WixUI_ErrorProgressText" />

            <!-- Custom dialog sequence -->
            <DialogRef Id="InstallScopeDlg" />
            <DialogRef Id="BrowseDlg" />
            <DialogRef Id="DiskCostDlg" />

            <Publish Dialog="WelcomeDlg" Control="Next" Event="NewDialog" Value="InstallScopeDlg" Order="2">1</Publish>

            <Publish Dialog="InstallScopeDlg" Control="Back" Event="NewDialog" Value="WelcomeDlg">1</Publish>
            <Publish Dialog="InstallScopeDlg" Control="Next" Event="NewDialog" Value="CustomizeDlg" Order="2">1</Publish>

            <Publish Dialog="CustomizeDlg" Control="Back" Event="NewDialog" Value="InstallScopeDlg">1</Publish>
            <Publish Dialog="CustomizeDlg" Control="Next" Event="NewDialog" Value="VerifyReadyDlg">1</Publish>

            <Publish Dialog="VerifyReadyDlg" Control="Back" Event="NewDialog" Value="CustomizeDlg">1</Publish>

            <!-- Checkbox for desktop shortcut on finish dialog -->
            <Publish Dialog="ExitDialog" Control="Finish" Event="DoAction" Value="LaunchApplication">
                <![CDATA[LAUNCHAPPONEXIT = 1]]>
            </Publish>
        </UI>

        <!-- Custom InstallScope Dialog -->
        <Property Id="WixAppFolder" Value="WixPerMachineFolder" />
    </Fragment>
</Wix>